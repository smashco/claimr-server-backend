"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[418],{6418:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var a=r(5155),s=r(2115),l=r(719),o=r(8340);let n=(0,o.A)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]),i=(0,o.A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),d=(0,o.A)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),c=(0,o.A)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),x=(0,o.A)("mouse-pointer-2",[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]]),h=(0,o.A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),u=(0,o.A)("undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]),f=(0,o.A)("redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]),g=(0,o.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),p=(0,o.A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);function m({territory:e,onSave:t,onCancel:r}){let o=(0,s.useRef)(null),[m,b]=(0,s.useState)(null),[y,v]=(0,s.useState)(null),[j,k]=(0,s.useState)("#ffffff"),[w,N]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(!o.current)return;let t=90,r=-90,a=180,s=-180;e.geometry&&e.geometry.coordinates&&e.geometry.coordinates[0].forEach(e=>{let l=e[0],o=e[1];o<t&&(t=o),o>r&&(r=o),l<a&&(a=l),l>s&&(s=l)});let n=s-a,i=r-t,d=n*(111320*Math.cos((t+r)/2*Math.PI/180))/(111320*i),c=800,x=800/d;x>600&&(c=(x=600)*d);let h=new l.Hl(o.current,{width:c,height:x,backgroundColor:j||"transparent",selection:!0,preserveObjectStacking:!0});if(b(h),h.on("selection:created",e=>v(e.selected?.[0]||null)),h.on("selection:updated",e=>v(e.selected?.[0]||null)),h.on("selection:cleared",()=>v(null)),e.geometry&&e.geometry.coordinates){let t=e.geometry.coordinates[0].map(e=>{let t=e[0],s=e[1];return{x:(t-a)/n*c,y:(r-s)/i*x}});h.clipPath=new l.tS(t,{left:0,top:0,originX:"left",originY:"top",absolutePositioned:!0});let s=new l.tS(t,{left:0,top:0,fill:"transparent",stroke:"#3b82f6",strokeWidth:2,strokeDashArray:[10,10],selectable:!1,evented:!1,absolutePositioned:!0,opacity:.5});h.add(s),h.renderAll()}return()=>{h.dispose()}},[e]);let A=e=>{m&&(k(e),m.backgroundColor=e,m.renderAll())};return(0,a.jsxs)("div",{className:"flex h-screen bg-[#0f172a] text-white overflow-hidden font-sans",children:[(0,a.jsxs)("div",{className:"w-80 bg-[#1e293b] border-r border-gray-800 flex flex-col shadow-xl z-10",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-800",children:[(0,a.jsx)("h1",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent",children:"Design Studio"}),(0,a.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Designing for: ",e.name]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[(0,a.jsxs)("section",{children:[(0,a.jsxs)("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-4 flex items-center gap-2",children:[(0,a.jsx)(n,{size:14})," Layers & Content"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("label",{className:"flex flex-col items-center justify-center p-4 bg-[#0f172a] border border-gray-700 rounded-xl cursor-pointer hover:border-blue-500 hover:bg-[#1e293b] transition-all group",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-blue-500/10 flex items-center justify-center mb-2 group-hover:bg-blue-500/20 transition-colors",children:(0,a.jsx)(i,{size:20,className:"text-blue-400"})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Image"}),(0,a.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{let t=e.target.files?.[0];if(!t||!m)return;let r=new FileReader;r.onload=e=>{let t=e.target?.result;l._V.fromURL(t).then(e=>{e.width&&e.width>400&&e.scaleToWidth(400),m.add(e),m.centerObject(e),m.setActiveObject(e),m.renderAll()})},r.readAsDataURL(t)}})]}),(0,a.jsxs)("button",{onClick:()=>{if(!m)return;let e=new l.DA("Your Brand",{left:100,top:100,fontFamily:"Inter, sans-serif",fill:"#000000",fontSize:40,fontWeight:"bold"});m.add(e),m.centerObject(e),m.setActiveObject(e)},className:"flex flex-col items-center justify-center p-4 bg-[#0f172a] border border-gray-700 rounded-xl hover:border-purple-500 hover:bg-[#1e293b] transition-all group",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-500/10 flex items-center justify-center mb-2 group-hover:bg-purple-500/20 transition-colors",children:(0,a.jsx)(d,{size:20,className:"text-purple-400"})}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-300",children:"Text"})]})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsxs)("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-4 flex items-center gap-2",children:[(0,a.jsx)(c,{size:14})," Background"]}),(0,a.jsx)("div",{className:"grid grid-cols-5 gap-2",children:["#ffffff","#000000","#f8fafc","#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#8b5cf6","#ec4899"].map(e=>(0,a.jsx)("button",{onClick:()=>A(e),className:`w-10 h-10 rounded-lg border-2 transition-transform hover:scale-110 ${j===e?"border-white shadow-lg scale-110":"border-transparent"}`,style:{backgroundColor:e},title:e},e))}),(0,a.jsxs)("div",{className:"mt-3 flex items-center gap-3 p-3 bg-[#0f172a] rounded-lg border border-gray-700",children:[(0,a.jsx)("input",{type:"color",value:j,onChange:e=>A(e.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-none"}),(0,a.jsx)("span",{className:"text-sm text-gray-400 font-mono",children:j})]})]}),y&&(0,a.jsxs)("section",{className:"animate-in slide-in-from-left-4 fade-in duration-200",children:[(0,a.jsxs)("h3",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider mb-4 flex items-center gap-2",children:[(0,a.jsx)(x,{size:14})," Selection"]}),(0,a.jsxs)("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-xl",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,a.jsx)("span",{className:"text-sm text-red-200",children:"Selected Item"})}),(0,a.jsxs)("button",{onClick:()=>{m&&y&&(m.remove(y),m.discardActiveObject(),m.renderAll())},className:"w-full flex items-center justify-center gap-2 p-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors text-sm font-medium",children:[(0,a.jsx)(h,{size:16})," Delete Object"]})]})]})]}),(0,a.jsx)("div",{className:"p-4 border-t border-gray-800 text-xs text-gray-500 text-center",children:"Use mouse to move, scale & rotate"})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col relative bg-[#0f172a] bg-[radial-gradient(#1e293b_1px,transparent_1px)] [background-size:16px_16px]",children:[(0,a.jsxs)("div",{className:"h-16 border-b border-gray-800 flex items-center justify-between px-8 bg-[#0f172a]/80 backdrop-blur-md z-10",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",title:"Undo",children:(0,a.jsx)(u,{size:18})}),(0,a.jsx)("button",{className:"p-2 text-gray-400 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",title:"Redo",children:(0,a.jsx)(f,{size:18})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-800 rounded-lg transition-colors flex items-center gap-2",children:[(0,a.jsx)(g,{size:16})," Cancel"]}),(0,a.jsxs)("button",{onClick:()=>{if(m){if(!j||"transparent"===j||""===j)return void alert("Please select a background color before saving. This ensures your ad looks great on the map!");N(!0),setTimeout(()=>{let e=m.toDataURL({format:"png",quality:1,multiplier:2}),r=m.backgroundColor;m.backgroundColor="transparent",m.renderAll();let a=m.toDataURL({format:"png",quality:1,multiplier:2});m.backgroundColor=r,m.renderAll(),t({fullImage:e,overlayImage:a,backgroundColor:j})},500)}},disabled:w,className:"px-6 py-2 text-sm font-bold text-white bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 rounded-lg shadow-lg shadow-blue-500/20 transition-all transform hover:scale-105 active:scale-95 flex items-center gap-2",children:[w?(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,a.jsx)(p,{size:16}),w?"Saving...":"Save Design"]})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto flex items-center justify-center p-12",children:(0,a.jsx)("div",{className:"relative shadow-2xl shadow-black/50 rounded-sm overflow-hidden border border-gray-700 bg-[url('https://res.cloudinary.com/dvvqa6xgj/image/upload/v1709138658/checkerboard_v2_q7gq9e.png')] bg-repeat",children:(0,a.jsx)("canvas",{ref:o})})})]})]})}}}]);