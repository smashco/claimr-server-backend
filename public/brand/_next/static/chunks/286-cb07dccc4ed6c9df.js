(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[286],{164:(e,t,o)=>{"use strict";o.d(t,{Wd:()=>O,zD:()=>x,kL:()=>k,Ay:()=>C});var r=o(2115);let n=r.createContext(null);function i(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!i(e[o],t[o]))return!1;return!0}if(Array.isArray(t))return!1;if("object"==typeof e&&"object"==typeof t){let o=Object.keys(e),r=Object.keys(t);if(o.length!==r.length)return!1;for(let r of o)if(!t.hasOwnProperty(r)||!i(e[r],t[r]))return!1;return!0}return!1}function a(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function s(e,t){let o=t.viewState||t,r={};return"longitude"in o&&"latitude"in o&&(o.longitude!==e.center.lng||o.latitude!==e.center.lat)&&(r.center=new e.center.constructor(o.longitude,o.latitude)),"zoom"in o&&o.zoom!==e.zoom&&(r.zoom=o.zoom),"bearing"in o&&o.bearing!==e.bearing&&(r.bearing=o.bearing),"pitch"in o&&o.pitch!==e.pitch&&(r.pitch=o.pitch),o.padding&&e.padding&&!i(o.padding,e.padding)&&(r.padding=o.padding),r}let l=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function u(e){if(!e)return null;if("string"==typeof e||("toJS"in e&&(e=e.toJS()),!e.layers))return e;let t={};for(let o of e.layers)t[o.id]=o;let o=e.layers.map(e=>{let o=null;"interactive"in e&&(o=Object.assign({},e),delete o.interactive);let r=t[e.ref];if(r)for(let t of(o=o||Object.assign({},e),delete o.ref,l))t in r&&(o[t]=r[t]);return o||e});return{...e,layers:o}}let d={version:8,sources:{},layers:[]},c={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},p={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},f={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},m=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],h=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class g{constructor(e,t,o){this._map=null,this._internalUpdate=!1,this._hoveredFeatures=null,this._propsedCameraUpdate=null,this._styleComponents={},this._onEvent=e=>{let t=this.props[f[e.type]];t?t(e):"error"===e.type&&console.error(e.error)},this._onCameraEvent=e=>{if(this._internalUpdate)return;e.viewState=this._propsedCameraUpdate||a(this._map.transform);let t=this.props[p[e.type]];t&&t(e)},this._onCameraUpdate=e=>this._internalUpdate?e:(this._propsedCameraUpdate=a(e),s(e,this.props)),this._onPointerEvent=e=>{("mousemove"===e.type||"mouseout"===e.type)&&this._updateHover(e);let t=this.props[c[e.type]];t&&(this.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type&&(e.features=this._hoveredFeatures||this._queryRenderedFeatures(e.point)),t(e),delete e.features)},this._MapClass=e,this.props=t,this._initialize(o)}get map(){return this._map}setProps(e){let t=this.props;this.props=e;let o=this._updateSettings(e,t),r=this._updateSize(e),n=this._updateViewState(e);this._updateStyle(e,t),this._updateStyleComponents(e),this._updateHandlers(e,t),(o||r||n&&!this._map.isMoving())&&this.redraw()}static reuse(e,t){let o=g.savedMaps.pop();if(!o)return null;let r=o.map,n=r.getContainer();for(t.className=n.className;n.childNodes.length>0;)t.appendChild(n.childNodes[0]);r._container=t;let i=r._resizeObserver;i&&(i.disconnect(),i.observe(t)),o.setProps({...e,styleDiffing:!1}),r.resize();let{initialViewState:a}=e;return a&&(a.bounds?r.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):o._updateViewState(a)),r.isStyleLoaded()?r.fire("load"):r.once("style.load",()=>r.fire("load")),r._update(),o}_initialize(e){let{props:t}=this,{mapStyle:o=d}=t,r={...t,...t.initialViewState,container:e,style:u(o)},n=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[n.longitude||0,n.latitude||0],zoom:n.zoom||0,pitch:n.pitch||0,bearing:n.bearing||0}),t.gl){let e=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=e,t.gl)}let i=new this._MapClass(r);for(let e in n.padding&&i.setPadding(n.padding),t.cursor&&(i.getCanvas().style.cursor=t.cursor),i.transformCameraUpdate=this._onCameraUpdate,i.on("style.load",()=>{this._styleComponents={light:i.getLight(),sky:i.getSky(),projection:i.getProjection?.(),terrain:i.getTerrain()},this._updateStyleComponents(this.props)}),i.on("sourcedata",()=>{this._updateStyleComponents(this.props)}),c)i.on(e,this._onPointerEvent);for(let e in p)i.on(e,this._onCameraEvent);for(let e in f)i.on(e,this._onEvent);this._map=i}recycle(){let e=this.map.getContainer().querySelector("[mapboxgl-children]");e?.remove(),g.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){let e=this._map;e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_updateSize(e){let{viewState:t}=e;if(t){let e=this._map;if(t.width!==e.transform.width||t.height!==e.transform.height)return e.resize(),!0}return!1}_updateViewState(e){let t=this._map,o=t.transform;if(!t.isMoving()){let r=s(o,e);if(Object.keys(r).length>0)return this._internalUpdate=!0,t.jumpTo(r),this._internalUpdate=!1,!0}return!1}_updateSettings(e,t){let o=this._map,r=!1;for(let n of m)if(n in e&&!i(e[n],t[n])){r=!0;let t=o[`set${n[0].toUpperCase()}${n.slice(1)}`];t?.call(o,e[n])}return r}_updateStyle(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==t.mapStyle){let{mapStyle:t=d,styleDiffing:o=!0}=e,r={diff:o};"localIdeographFontFamily"in e&&(r.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(u(t),r)}}_updateStyleComponents({light:e,projection:t,sky:o,terrain:r}){let n=this._map,a=this._styleComponents;n.style._loaded&&(e&&!i(e,a.light)&&(a.light=e,n.setLight(e)),t&&!i(t,a.projection)&&t!==a.projection?.type&&(a.projection="string"==typeof t?{type:t}:t,n.setProjection?.(a.projection)),o&&!i(o,a.sky)&&(a.sky=o,n.setSky(o)),void 0!==r&&!i(r,a.terrain)&&(!r||n.getSource(r.source))&&(a.terrain=r,n.setTerrain(r)))}_updateHandlers(e,t){let o=this._map;for(let r of h){let n=e[r]??!0;i(n,t[r]??!0)||(n?o[r].enable(n):o[r].disable())}}_queryRenderedFeatures(e){let t=this._map,{interactiveLayerIds:o=[]}=this.props;try{return t.queryRenderedFeatures(e,{layers:o.filter(t.getLayer.bind(t))})}catch{return[]}}_updateHover(e){let{props:t}=this;if(t.interactiveLayerIds&&(t.onMouseMove||t.onMouseEnter||t.onMouseLeave)){let t=e.type,o=this._hoveredFeatures?.length>0,r=this._queryRenderedFeatures(e.point),n=r.length>0;!n&&o&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=r,n&&!o&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=t}else this._hoveredFeatures=null}}g.savedMaps=[];let y=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"],v="undefined"!=typeof document?r.useLayoutEffect:r.useEffect,_=r.createContext(null),C=r.forwardRef(function(e,t){let i=(0,r.useContext)(n),[a,s]=(0,r.useState)(null),l=(0,r.useRef)(),{current:u}=(0,r.useRef)({mapLib:null,map:null});(0,r.useEffect)(()=>{let t,r=e.mapLib,n=!0;return Promise.resolve(r||o.e(600).then(o.t.bind(o,6379,19))).then(o=>{if(!n)return;if(!o)throw Error("Invalid mapLib");let r="Map"in o?o:o.default;if(!r.Map)throw Error("Invalid mapLib");!function(e,t){let{RTLTextPlugin:o,maxParallelImageRequests:r,workerCount:n,workerUrl:i}=t;if(o&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()){let{pluginUrl:t,lazy:r=!0}="string"==typeof o?{pluginUrl:o}:o;e.setRTLTextPlugin(t,e=>{e&&console.error(e)},r)}void 0!==r&&e.setMaxParallelImageRequests(r),void 0!==n&&e.setWorkerCount(n),void 0!==i&&e.setWorkerUrl(i)}(r,e),e.reuseMaps&&(t=g.reuse(e,l.current)),t||(t=new g(r.Map,e,l.current)),u.map=function(e){if(!e)return null;let t=e.map,o={getMap:()=>t};for(let e of function(e){let t=new Set,o=e;for(;o;){for(let r of Object.getOwnPropertyNames(o))"_"!==r[0]&&"function"==typeof e[r]&&"fire"!==r&&"setEventedParent"!==r&&t.add(r);o=Object.getPrototypeOf(o)}return Array.from(t)}(t))e in o||y.includes(e)||(o[e]=t[e].bind(t));return o}(t),u.mapLib=r,s(t),i?.onMapMount(u.map,e.id)}).catch(t=>{let{onError:o}=e;o?o({type:"error",target:null,originalEvent:null,error:t}):console.error(t)}),()=>{n=!1,t&&(i?.onMapUnmount(e.id),e.reuseMaps?t.recycle():t.destroy())}},[]),v(()=>{a&&a.setProps(e)}),(0,r.useImperativeHandle)(t,()=>u.map,[a]);let d=(0,r.useMemo)(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]);return r.createElement("div",{id:e.id,ref:l,style:d},a&&r.createElement(_.Provider,{value:u},r.createElement("div",{"mapboxgl-children":"",style:{height:"100%"}},e.children)))});var L=o(7650);let E=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function b(e,t){if(!e||!t)return;let o=e.style;for(let e in t){let r=t[e];Number.isFinite(r)&&!E.test(e)?o[e]=`${r}px`:o[e]=r}}function S(e,t){if(e===t)return null;let o=M(e),r=M(t),n=[];for(let e of r)o.has(e)||n.push(e);for(let e of o)r.has(e)||n.push(e);return 0===n.length?null:n}function M(e){return new Set(e?e.trim().split(/\s+/):[])}(0,r.memo)((0,r.forwardRef)((e,t)=>{var o;let n,i,a,s,{map:l,mapLib:u}=(0,r.useContext)(_),d=(0,r.useRef)({props:e}),c=(0,r.useMemo)(()=>{let t=!1;r.Children.forEach(e.children,e=>{e&&(t=!0)});let o={...e,element:t?document.createElement("div"):void 0},n=new u.Marker(o);return n.setLngLat([e.longitude,e.latitude]),n.getElement().addEventListener("click",e=>{d.current.props.onClick?.({type:"click",target:n,originalEvent:e})}),n.on("dragstart",e=>{e.lngLat=c.getLngLat(),d.current.props.onDragStart?.(e)}),n.on("drag",e=>{e.lngLat=c.getLngLat(),d.current.props.onDrag?.(e)}),n.on("dragend",e=>{e.lngLat=c.getLngLat(),d.current.props.onDragEnd?.(e)}),n},[]);(0,r.useEffect)(()=>(c.addTo(l.getMap()),()=>{c.remove()}),[]);let{longitude:p,latitude:f,offset:m,style:h,draggable:g=!1,popup:y=null,rotation:v=0,rotationAlignment:C="auto",pitchAlignment:E="auto"}=e;(0,r.useEffect)(()=>{b(c.getElement(),h)},[h]),(0,r.useImperativeHandle)(t,()=>c,[]);let M=d.current.props;(c.getLngLat().lng!==p||c.getLngLat().lat!==f)&&c.setLngLat([p,f]),m&&(o=c.getOffset(),n=Array.isArray(o)?o[0]:o?o.x:0,i=Array.isArray(o)?o[1]:o?o.y:0,a=Array.isArray(m)?m[0]:m?m.x:0,s=Array.isArray(m)?m[1]:m?m.y:0,n!==a||i!==s)&&c.setOffset(m),c.isDraggable()!==g&&c.setDraggable(g),c.getRotation()!==v&&c.setRotation(v),c.getRotationAlignment()!==C&&c.setRotationAlignment(C),c.getPitchAlignment()!==E&&c.setPitchAlignment(E),c.getPopup()!==y&&c.setPopup(y);let x=S(M.className,e.className);if(x)for(let e of x)c.toggleClassName(e);return d.current.props=e,(0,L.createPortal)(e.children,c.getElement())}));let x=(0,r.memo)((0,r.forwardRef)((e,t)=>{let{map:o,mapLib:n}=(0,r.useContext)(_),a=(0,r.useMemo)(()=>document.createElement("div"),[]),s=(0,r.useRef)({props:e}),l=(0,r.useMemo)(()=>{let t={...e},o=new n.Popup(t);return o.setLngLat([e.longitude,e.latitude]),o.once("open",e=>{s.current.props.onOpen?.(e)}),o},[]);if((0,r.useEffect)(()=>{let e=e=>{s.current.props.onClose?.(e)};return l.on("close",e),l.setDOMContent(a).addTo(o.getMap()),()=>{l.off("close",e),l.isOpen()&&l.remove()}},[]),(0,r.useEffect)(()=>{b(l.getElement(),e.style)},[e.style]),(0,r.useImperativeHandle)(t,()=>l,[]),l.isOpen()){let t=s.current.props;(l.getLngLat().lng!==e.longitude||l.getLngLat().lat!==e.latitude)&&l.setLngLat([e.longitude,e.latitude]),e.offset&&!i(t.offset,e.offset)&&l.setOffset(e.offset),(t.anchor!==e.anchor||t.maxWidth!==e.maxWidth)&&(l.options.anchor=e.anchor,l.setMaxWidth(e.maxWidth));let o=S(t.className,e.className);if(o)for(let e of o)l.toggleClassName(e);s.current.props=e}return(0,L.createPortal)(e.children,a)}));function P(e,t,o,n){let i=(0,r.useContext)(_),a=(0,r.useMemo)(()=>e(i),[]);return(0,r.useEffect)(()=>{let e="function"==typeof t&&"function"==typeof o?t:null,r="function"==typeof o?o:"function"==typeof t?t:null,{map:s}=i;return!s.hasControl(a)&&(s.addControl(a,(n||o||t)?.position),e&&e(i)),()=>{r&&r(i),s.hasControl(a)&&s.removeControl(a)}},[]),a}function w(e,t){if(!e)throw Error(t)}(0,r.memo)(function(e){let t=P(({mapLib:t})=>new t.AttributionControl(e),{position:e.position});return(0,r.useEffect)(()=>{b(t._container,e.style)},[e.style]),null}),(0,r.memo)(function(e){let t=P(({mapLib:t})=>new t.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return(0,r.useEffect)(()=>{b(t._controlContainer,e.style)},[e.style]),null}),(0,r.memo)((0,r.forwardRef)(function(e,t){let o=(0,r.useRef)({props:e}),n=P(({mapLib:t})=>{let r=new t.GeolocateControl(e),n=r._setupUI;return r._setupUI=()=>{r._container.hasChildNodes()||n()},r.on("geolocate",e=>{o.current.props.onGeolocate?.(e)}),r.on("error",e=>{o.current.props.onError?.(e)}),r.on("outofmaxbounds",e=>{o.current.props.onOutOfMaxBounds?.(e)}),r.on("trackuserlocationstart",e=>{o.current.props.onTrackUserLocationStart?.(e)}),r.on("trackuserlocationend",e=>{o.current.props.onTrackUserLocationEnd?.(e)}),r},{position:e.position});return o.current.props=e,(0,r.useImperativeHandle)(t,()=>n,[]),(0,r.useEffect)(()=>{b(n._container,e.style)},[e.style]),null})),(0,r.memo)(function(e){let t=P(({mapLib:t})=>new t.NavigationControl(e),{position:e.position});return(0,r.useEffect)(()=>{b(t._container,e.style)},[e.style]),null}),(0,r.memo)(function(e){let t=P(({mapLib:t})=>new t.ScaleControl(e),{position:e.position}),o=(0,r.useRef)(e),n=o.current;o.current=e;let{style:i}=e;return void 0!==e.maxWidth&&e.maxWidth!==n.maxWidth&&(t.options.maxWidth=e.maxWidth),void 0!==e.unit&&e.unit!==n.unit&&t.setUnit(e.unit),(0,r.useEffect)(()=>{b(t._container,i)},[i]),null}),(0,r.memo)(function(e){let t=P(({mapLib:t})=>new t.TerrainControl(e),{position:e.position});return(0,r.useEffect)(()=>{b(t._container,e.style)},[e.style]),null}),(0,r.memo)(function(e){let t=P(({mapLib:t})=>new t.LogoControl(e),{position:e.position});return(0,r.useEffect)(()=>{b(t._container,e.style)},[e.style]),null});let R=0;function k(e){let t=(0,r.useContext)(_).map.getMap(),o=(0,r.useRef)(e),[,n]=(0,r.useState)(0),a=(0,r.useMemo)(()=>e.id||`jsx-source-${R++}`,[]);(0,r.useEffect)(()=>{if(t){let e=()=>setTimeout(()=>n(e=>e+1),0);return t.on("styledata",e),e(),()=>{if(t.off("styledata",e),t.style&&t.style._loaded&&t.getSource(a)){let e=t.getStyle()?.layers;if(e)for(let o of e)o.source===a&&t.removeLayer(o.id);t.removeSource(a)}}}},[t]);let s=t&&t.style&&t.getSource(a);return s?!function(e,t,o){w(t.id===o.id,"source id changed"),w(t.type===o.type,"source type changed");let r="",n=0;for(let e in t)"children"!==e&&"id"!==e&&!i(o[e],t[e])&&(r=e,n++);if(!n)return;let a=t.type;if("geojson"===a)e.setData(t.data);else if("image"===a)e.updateImage({url:t.url,coordinates:t.coordinates});else switch(r){case"coordinates":e.setCoordinates?.(t.coordinates);break;case"url":e.setUrl?.(t.url);break;case"tiles":e.setTiles?.(t.tiles);break;default:console.warn(`Unable to update <Source> prop: ${r}`)}}(s,e,o.current):s=function(e,t,o){if(e.style&&e.style._loaded){let r={...o};return delete r.id,delete r.children,e.addSource(t,r),e.getSource(t)}return null}(t,a,e),o.current=e,s&&r.Children.map(e.children,e=>e&&(0,r.cloneElement)(e,{source:a}))||null}let z=0;function O(e){let t=(0,r.useContext)(_).map.getMap(),o=(0,r.useRef)(e),[,n]=(0,r.useState)(0),a=(0,r.useMemo)(()=>e.id||`jsx-layer-${z++}`,[]);if((0,r.useEffect)(()=>{if(t){let e=()=>n(e=>e+1);return t.on("styledata",e),e(),()=>{t.off("styledata",e),t.style&&t.style._loaded&&t.getLayer(a)&&t.removeLayer(a)}}},[t]),t&&t.style&&t.getLayer(a))try{!function(e,t,o,r){if(w(o.id===r.id,"layer id changed"),w(o.type===r.type,"layer type changed"),"custom"===o.type||"custom"===r.type)return;let{layout:n={},paint:a={},filter:s,minzoom:l,maxzoom:u,beforeId:d}=o;if(d!==r.beforeId&&e.moveLayer(t,d),n!==r.layout){let o=r.layout||{};for(let r in n)i(n[r],o[r])||e.setLayoutProperty(t,r,n[r]);for(let r in o)n.hasOwnProperty(r)||e.setLayoutProperty(t,r,void 0)}if(a!==r.paint){let o=r.paint||{};for(let r in a)i(a[r],o[r])||e.setPaintProperty(t,r,a[r]);for(let r in o)a.hasOwnProperty(r)||e.setPaintProperty(t,r,void 0)}i(s,r.filter)||e.setFilter(t,s),(l!==r.minzoom||u!==r.maxzoom)&&e.setLayerZoomRange(t,l,u)}(t,a,e,o.current)}catch(e){console.warn(e)}else if(t.style&&t.style._loaded&&(!("source"in e)||t.getSource(e.source))){let o={...e,id:a};delete o.beforeId,t.addLayer(o,e.beforeId)}return o.current=e,null}},3879:()=>{}}]);